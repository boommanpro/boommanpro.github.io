<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://boommanpro.cn/</id>
    <title>BoomMan</title>
    <updated>2021-04-24T14:28:32.448Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://boommanpro.cn/"/>
    <link rel="self" href="https://boommanpro.cn/atom.xml"/>
    <subtitle>çˆ±ç”Ÿæ´» , çˆ±Coding .....</subtitle>
    <logo>https://boommanpro.cn/images/avatar.png</logo>
    <icon>https://boommanpro.cn/favicon.ico</icon>
    <rights>All rights reserved 2021, BoomMan</rights>
    <entry>
        <title type="html"><![CDATA[å…³äºä¸€äº›ç¼–ç¨‹ä¹¦ç±æ¨è]]></title>
        <id>https://boommanpro.cn/post/book/</id>
        <link href="https://boommanpro.cn/post/book/">
        </link>
        <updated>2021-04-24T14:22:08.000Z</updated>
        <content type="html"><![CDATA[<h2 id="http">HTTP</h2>
<p>å›¾è§£HTTP</p>
<h2 id="linux">Linux</h2>
<p>Linuxå‘½ä»¤è¡Œä¸Shellè„šæœ¬ç¼–ç¨‹å¤§å…¨</p>
<p>Linuxç§æˆ¿èœ</p>
<h2 id="java">Java</h2>
<p>æ·±å…¥ç†è§£JVMè™šæ‹Ÿæœº</p>
<p>Javaæ ¸å¿ƒæŠ€æœ¯ å·I</p>
<p>Javaæ ¸å¿ƒæŠ€æœ¯ å·II</p>
<p>Java é«˜å¹¶å‘ç¼–ç¨‹è¯¦è§£</p>
<p>Spring Boot ç¼–ç¨‹æ€æƒ³</p>
<p>Nettyå®æˆ˜</p>
<p>Rediså®æˆ˜</p>
<h2 id="mysql">MySQL</h2>
<p>é«˜æ€§èƒ½MySQL</p>
<h2 id="ç®—æ³•">ç®—æ³•</h2>
<p>ç¼–ç¨‹ä¹‹ç¾ - å¾®è½¯æŠ€æœ¯é¢è¯•å¿ƒå¾—</p>
<h2 id="javascript">JavaScript</h2>
<p>é«˜çº§ç¨‹åºè®¾è®¡ JavaScript</p>
<h2 id="è®¾è®¡æ¨¡å¼">è®¾è®¡æ¨¡å¼</h2>
<p>å¤§è¯è®¾è®¡æ¨¡å¼</p>
<h2 id="cicd">CICD</h2>
<p>Jenkins2 æƒå¨æŒ‡å—</p>
<h2 id="ç å‡ºé«˜æ•ˆ">ç å‡ºé«˜æ•ˆ</h2>
<p>ç å‡ºé«˜æ•ˆ Javaå¼€å‘æ‰‹å†Œ</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[2021å¹´1æœˆç”Ÿæ´»å°ç»“]]></title>
        <id>https://boommanpro.cn/post/2021-01-log/</id>
        <link href="https://boommanpro.cn/post/2021-01-log/">
        </link>
        <updated>2021-01-23T09:36:30.000Z</updated>
        <content type="html"><![CDATA[<h2 id="ç®€å•å°ç»“">ç®€å•å°ç»“</h2>
<p><img src="https://boommanpro.cn//post-images/1611395077323.jpg" alt="" loading="lazy"><br>
<img src="https://boommanpro.cn//post-images/1611394733635.jpg" alt="" loading="lazy"></p>
<p>åœ¨1æœˆä¸­æ—¬ç»“æŸäº†é•¿æ—¶é—´çš„å‡ºå·®ï¼Œæš‚æ—¶æ’¤åœºå›åˆ°åŒ—äº¬ï¼Œä¸æˆ‘çš„å®å®ä¸€èµ·ä¸Šä¸‹ç­ï¼Œå¥½å¼€å¿ƒğŸ˜€.</p>
<h2 id="æŠ€æœ¯å°ç»“">æŠ€æœ¯å°ç»“</h2>
<p>ç¼–å†™æŠ€æœ¯åšå®¢ 3ç¯‡ï¼Œå¹¶ä¸”å¯¹2021å¹´åšäº†flagï¼Œå¸Œæœ›2021å¹´å¥½å¥½åŠªåŠ›</p>
<p><a href="/post/spring-boot-devtools-error/">spring-boot-devtools ä½¿ç”¨å¼•å‘çš„ä¸€ç³»åˆ—é—®é¢˜</a><br>
<a href="/post/spring-boot-external-config/">Spring Boot 2.4 å¤–éƒ¨åŒ–é…ç½®çš„æ”¹å˜</a><br>
<a href="/post/window-tcp-update/">Window Tcp æ•°æ®ç¯¡æ”¹</a><br>
<a href="/post/2021-flag/">2021-flag</a></p>
<p>å¯¹golangé¡¹ç›®ä¸­çš„frpå’Œgoreplayæºç çš„ç¬¬1-3æ¬¡æäº¤è¿›è¡Œäº†å­¦ä¹ ï¼Œå­¦ä¹ äº†cobraå‘½ä»¤è¡Œæ¡†æ¶</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Window Tcp æ•°æ®ç¯¡æ”¹]]></title>
        <id>https://boommanpro.cn/post/window-tcp-update/</id>
        <link href="https://boommanpro.cn/post/window-tcp-update/">
        </link>
        <updated>2021-01-07T09:53:28.000Z</updated>
        <content type="html"><![CDATA[<h1 id="èƒŒæ™¯">èƒŒæ™¯</h1>
<p>ä»€ä¹ˆæ—¶å€™éœ€è¦ä¿®æ”¹TCPä¼ è¾“çš„æ•°æ® ? å¦‚æœæˆ‘ä»¬çŸ¥é“TCPä¸­çš„æ•°æ®,å¹¶ä¸”å¯ä»¥ä¿®æ”¹,å¯ä»¥åšä»€ä¹ˆ ?</p>
<p>TCPæ•°æ®ä¿®æ”¹æ€è·¯:</p>
<ol>
<li>Windowså¹³å° Winsock api æ›¿æ¢æœ¬æœºddl</li>
<li>Linuxå¹³å° netfilter åº“</li>
<li>é€šç”¨ ä»£ç†ä¸­é—´äººæ”»å‡»</li>
</ol>
<p>å¸¸è§å·¥å…·:</p>
<ol>
<li>WPEä¸‰å‰‘å®¢</li>
<li>HookMe</li>
<li>åŸºäºwinsockçš„ä¸€ç³»åˆ—å·¥å…·</li>
</ol>
<p>å› ä¸ªäººå¯¹dllç­‰ä¸ç†Ÿæ‚‰,netfilterå°è¯•å¤±è´¥ç­‰åŸå› ,é‚é‡‡ç”¨ä»£ç†ä¸­é—´äººæ–¹å¼ã€‚</p>
<p>ä½†æ˜¯äº†è§£tcpçš„éƒ½åº”è¯¥çŸ¥é“,tcpå’Œhttpä¼ è¾“æ¶ˆæ¯ä¸åŒçš„æ˜¯ï¼Œtcpçš„åŒ…ä¸­åªæœ‰æºä¿¡æ¯å’Œç›®çš„ä¿¡æ¯,è€Œhttpçš„åº”ç”¨å±‚ä¸­åŒ…å«äº†ç›®çš„æœåŠ¡çš„ä¿¡æ¯ã€‚é‚£ä¹ˆå¦‚æœä¿®æ”¹ç›®çš„ä¿¡æ¯ä¸ºä¸­é—´äººæœåŠ¡ï¼Œé‚£ä¹ˆåŸæœ¬çš„ç›®çš„ä¿¡æ¯å»å“ªé‡Œäº†?</p>
<p>è¿™é‡Œå¯ä»¥é‡‡ç”¨åˆ«äººå¼€å‘å¥½çš„socks5ä»£ç†æœåŠ¡ï¼Œå®ƒåŸºäºdllä»£ç†ï¼Œä¸ä¸­é—´äººæœåŠ¡å™¨å»ºç«‹è¿æ¥ï¼Œå»ºç«‹è¿æ¥æˆåŠŸåï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªtcpåŒ…ï¼Œé‡Œé¢åŒ…å«äº†åŸå§‹ä¿¡æ¯åŒ…ã€‚è¿™æ ·socks5æœåŠ¡å™¨å°±æœ‰äº†ä¸­é—´äººçš„æ¡ä»¶ã€‚</p>
<p>å®¢æˆ·ç«¯ä¸»æœº &lt;=&gt; ä»£ç†æœåŠ¡å™¨  &lt;=&gt; ç›®æ ‡æœåŠ¡å™¨</p>
<h2 id="ä¿®æ”¹é€»è¾‘">ä¿®æ”¹é€»è¾‘</h2>
<p>ä»¥golangä»£ç ä¸ºä¾‹</p>
<pre><code>func proxy(dst io.Writer, src io.Reader, lead bool, errCh chan error) {
	//è¿™å—ä½¿ç”¨çš„copy
	var err error
	//å‘é€çš„è§„åˆ™
	if lead {
		//srcæ˜¯è¯·æ±‚ä¿¡æ¯
		// é—®é¢˜æ˜¯å¦‚ä½•è§£å¯†å°åŒ…ä¸­çš„å«ä¹‰æ˜¯ä»€ä¹ˆ,ç„¶åå°±å¯ä»¥ç¼–ç ä¿®æ”¹å‘é€å’Œè¿”å›
		bufReq := bufio.NewReader(src)
		for ; ; {
			//éœ€è¦å°†å‘é€æŒ‡ä»¤æ¥æ”¶åˆ°ï¼Œç„¶åé‡å†™ å‘é€åˆ°æœåŠ¡ç«¯
			var buf [128]byte
			n ,_:=bufReq.Read(buf[:])
			fmt.Printf(&quot;æ¥æ”¶åˆ°å®é™…å®¢æˆ·ç«¯æ¶ˆæ¯%s&quot;,string(buf[:n]))

			dst.Write(([]byte)(string(buf[:n])+&quot;1&quot;))
		}
	} else {
		//æ¥å—çš„è§„åˆ™
		_, err = io.Copy(dst, src)
	}

	if tcpConn, ok := dst.(closeWriter); ok {
		tcpConn.CloseWrite()
	}
	errCh &lt;- err
}

</code></pre>
<p>å‡è®¾tcpä¸­çš„æ¶ˆæ¯éƒ½æ˜¯æ˜æ–‡ï¼Œä¸”å•ä¸ªæ¶ˆæ¯å°äºç­‰äº128ï¼Œè¿™æ ·ä¿®æ”¹é€»è¾‘å°±å®Œæˆçš„ã€‚å½“ç„¶å…·ä½“éœ€è¦å’Œå®é™…ç»“åˆã€‚</p>
<p>æ¶ˆæ¯ä¿®æ”¹ï¼Œå¹¶ä¸”æ²¡æœ‰é—®é¢˜ï¼Œéœ€è¦ä¸¥æ ¼éµå®ˆæœåŠ¡ç«¯æ¶ˆæ¯æ ¼å¼ï¼ŒåŠ å¯†è§£å¯†ï¼Œç›å€¼ï¼Œåºå·ç­‰ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Spring Boot 2.4 å¤–éƒ¨åŒ–é…ç½®çš„æ”¹å˜]]></title>
        <id>https://boommanpro.cn/post/spring-boot-external-config/</id>
        <link href="https://boommanpro.cn/post/spring-boot-external-config/">
        </link>
        <updated>2021-01-04T03:15:15.000Z</updated>
        <content type="html"><![CDATA[<h2 id="official-guide">Official Guide</h2>
<p><a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-Config-Data-Migration-Guide">å®˜æ–¹å‡çº§æŒ‡å—</a></p>
<p>ç†Ÿæ‚‰å¤–éƒ¨åŒ–é…ç½®çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼Œæˆ‘ä»¬è·å–å±æ€§éƒ½æ˜¯ä» Bean =&gt; Environmentä¸­è·å–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰“å° Standardçš„getPropertySources()å³å¯çŸ¥é“</p>
<h2 id="åŒæ ·æ˜¯å¤–éƒ¨åŒ–é…ç½®-springprofilesactivedev">åŒæ ·æ˜¯å¤–éƒ¨åŒ–é…ç½® spring.profiles.active=dev</h2>
<p>2.3.5.RELEASE</p>
<figure data-type="image" tabindex="1"><img src="https://boommanpro.cn//post-images/1609730299381.png" alt="" loading="lazy"></figure>
<p>2.4.1</p>
<figure data-type="image" tabindex="2"><img src="https://boommanpro.cn//post-images/1609730341477.png" alt="" loading="lazy"></figure>
<h2 id="ä¸ºä»€ä¹ˆåšäº†å¦‚æ­¤æ”¹å˜">ä¸ºä»€ä¹ˆåšäº†å¦‚æ­¤æ”¹å˜</h2>
<p>å®˜æ–¹issue : <a href="https://github.com/spring-projects/spring-boot/issues/2404">#2404</a> =&gt;<a href="https://github.com/spring-projects/spring-boot/issues/3845">#3845</a></p>
<p>å³å¯äº†è§£åˆ° =&gt;<br>
2.4ä¹‹å‰ =&gt; å³æ—¶æˆ‘ä»¬é‡‡ç”¨å¤–éƒ¨åŒ–é…ç½®ï¼Œä¹Ÿä¼šæœ‰å›°æƒ‘,è²Œä¼¼å¤–éƒ¨åŒ–é…ç½®ä¸ç”Ÿæ•ˆçš„é—®é¢˜ï¼Œå› ä¸ºä»–æ˜¯æŒ‰ç…§å¤–éƒ¨åŒ– dev =&gt; å†…éƒ¨ dev ,å¤–éƒ¨default,å†…éƒ¨ default è¿™æ ·åŠ è½½</p>
<p>2.4ä¹‹å =&gt; æŒ‰ç…§ä¹‹å‰é¡ºåº å…ˆåŠ è½½å¤–éƒ¨åŒ– file,å†åŠ è½½å†…éƒ¨çš„classpathæ–‡ä»¶. è¿™æ ·åªè¦å¤–é¢é…ç½®äº†æ–‡ä»¶å°±ä¸€å®šä¼šè¦†ç›–å†…éƒ¨çš„ï¼Œä¼šç”Ÿæ•ˆã€‚</p>
<h2 id="24çš„å¤–éƒ¨åŒ–é…ç½®è¿˜æœ‰å“ªäº›">2.4çš„å¤–éƒ¨åŒ–é…ç½®è¿˜æœ‰å“ªäº› ?</h2>
<p>å¢åŠ äº†ç»„æ¦‚å¿µ<br>
å¢åŠ äº†å¯¹å®¹å™¨åŒ–ç­‰æ”¯æŒ<br>
å¢åŠ äº†æ–¹ä¾¿çš„import å¯¼å…¥å…¶ä»–é…ç½®æ–‡ä»¶åˆ°environment ä¹‹é—´æˆ‘ä»¬åšè¿‡ç±»ä¼¼çš„äº‹æƒ… =&gt; <a href="https://boommanpro.cn/post/spring-boot-enableConfigurationProperties/">è®©@EnableConfigurationPropertiesçš„å€¼æ³¨å…¥åˆ°@Valueä¸­</a></p>
<h2 id="æœ¬è´¨ä¸Šä»£ç æ˜¯æ€ä¹ˆæ”¹çš„">æœ¬è´¨ä¸Šä»£ç æ˜¯æ€ä¹ˆæ”¹çš„ ?</h2>
<p>åŸæœ¬çš„é…ç½®æ–‡ä»¶åŠ è½½ç±» <code>ConfigFileApplicationListener</code>æ ‡è®°äº†@Deprecated  favor of =&gt; <code>org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor</code> =&gt; <code>org.springframework.boot.context.config.ConfigDataEnvironment</code></p>
<p>è¿™æ ·å°±æ”¹å˜äº†åŠ è½½ç­–ç•¥ï¼Œä»è€Œå‡å°‘ä½¿ç”¨å›°æƒ‘(æ˜æ˜é…ç½®äº†å¤–éƒ¨åŒ–æ–‡ä»¶ï¼Œä¸ºä»€ä¹ˆä¼šä¸ç”Ÿæ•ˆå‘¢?)</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[spring-boot-devtools ä½¿ç”¨å¼•å‘çš„ä¸€ç³»åˆ—é—®é¢˜]]></title>
        <id>https://boommanpro.cn/post/spring-boot-devtools-error/</id>
        <link href="https://boommanpro.cn/post/spring-boot-devtools-error/">
        </link>
        <updated>2021-01-03T09:02:08.000Z</updated>
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>åœ¨çœ‹ giteeçš„ä¸€ä¸ªå¼€æºé¡¹ç›® =&gt; <a href="https://gitee.com/huanzi-qch/base-admin.git">gitee-base-admin</a> çš„æ—¶å€™,å‘ç°å…¶ä¸­çš„é¡¹ç›®æ—¥å¿—é€šè¿‡websocketæ¨é€åˆ°å®¢æˆ·ç«¯æŒºæœ‰æ„ä¹‰çš„.ä¸ªäººé¡¹ç›®å¯ä»¥åŠ ä¸Šè¿™ä¸ªå°åŠŸèƒ½ã€‚</p>
<p>ä½†æ˜¯ å…¶å®ç°æ˜¯æ¯ä¸ªç”¨æˆ·éƒ½æ–°å»ºçº¿ç¨‹å»æ¨æ—¥å¿—, çº¿ç¨‹æ•°å’Œç”¨æˆ·æ•° 1:1. å¹¶ä¸”æ— æ³•å¯¹é›†ç¾¤æ—¥å¿—ç›‘å¬.é‚æƒ³å®ç°æ›´é€šç”¨(ä¼˜é›…)çš„æ–¹æ³•å®ç°</p>
<h2 id="æ”¹å†™æ€è·¯">æ”¹å†™æ€è·¯</h2>
<ol>
<li>å°†åŸæœ¬çš„è¯»å–æœ¬åœ°æ—¥å¿—æ–‡ä»¶ =&gt; loggingçš„appendæœºåˆ¶ =&gt; append å¤šä»½ =&gt; è¿½åŠ ä¸€ä»½åˆ°è‡ªå®šä¹‰çš„ Appender</li>
<li>Appenderå°†æ¶ˆæ¯å†™å…¥åˆ°Dispatcherä¸­è¿›è¡Œåˆ†å‘å¤„ç†</li>
<li>å°†DispatcheræŠ½è±¡ä¸ºæ¥å£,åšå¤šä»½å®ç° ä»¥æ»¡è¶³ å•æœºåŸºäºå†…å­˜çš„,é›†ç¾¤åŸºäºmqä¸­é—´ä»¶çš„æƒ…å†µ</li>
<li>å°†ç”¨æˆ·çš„websocketä¸Šä¸‹çº¿æ¨é€ =&gt; ç¼“å­˜nè¡Œ(CircularFifoQueue)åšé¦–æ¬¡æ¨é€,å…¶ä»–çš„æ¶ˆæ¯åšè½®è¯¢ç”¨æˆ·æ¨é€,å¯ä»¥å¼‚æ­¥åŒ–é˜²æ­¢å•æ¡æ¶ˆæ¯é˜»å¡æ—¶é—´é•¿çš„é—®é¢˜ã€‚ æ–°ç”¨æˆ·æ¨é€éœ€è¦æ³¨æ„é˜²æ­¢æ¶ˆæ¯ä¸¢å¤±é—®é¢˜</li>
<li>coding</li>
</ol>
<h2 id="å‘ç‚¹å‡ºç°äº†">å‘ç‚¹å‡ºç°äº†</h2>
<p>åœ¨é¡¹ç›®å¯åŠ¨çš„æ—¶å€™,å¯åŠ¨æ²¡æœ‰æŠ¥é”™ï¼Œå°±æ˜¯æ²¡æœ‰æ–°æ¶ˆæ¯è¿‡æ¥ï¼Œä½†æ˜¯appendä¹Ÿå†™å…¥æ¶ˆæ¯ï¼Œä½†æ˜¯å°±æ˜¯å–ä¸åˆ°æ¶ˆæ¯å¯ä»¥è¿›è¡Œæ¶ˆè´¹,åå‘ç°ä¸¤ä¸ªDispatcherä¸æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œé¥¿æ±‰å¼çš„å•ä¾‹å¤±æ•ˆäº†? ç«Ÿç„¶ä¸æ˜¯ä¸€ä¸ªç±»åŠ è½½å™¨?</p>
<p>åŸå› å¦‚ä¸‹:</p>
<p><code>spring-boot-devtools</code> å¯¹é¡¹ç›®çš„ä»£ç æ˜¯ RestartClassLoader,jaråŒ…çš„ä»£ç åˆ™æ˜¯App,åˆå› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡logbackæ„é€ çš„append,æ‰€ä»¥å°±ç®—æ˜¯é¡¹ç›®çš„ä»£ç ï¼Œæ„é€ æ–¹å¼ï¼Œæˆ–è€…æµç¨‹ä¸ä¸€ï¼Œå¯¼è‡´ç±»åŠ è½½å™¨ä¸ä¸€æ ·ï¼Œæœ€ç»ˆä½“ç°åœ¨å•ä¾‹ä¸æ˜¯å•ä¾‹äº†ã€‚</p>
<p>æ€ä¹ˆè§£å†³å‘¢? ä¸ç”¨devtoolså³å¯ !!! æˆ–è€…ç™¾åº¦dev-tools é…ç½® or jreblä¸é¦™å—</p>
<h2 id="ç¼–å†™è¿‡ç¨‹ä¸­çš„æ³¨æ„ç‚¹">ç¼–å†™è¿‡ç¨‹ä¸­çš„æ³¨æ„ç‚¹</h2>
<p>å› ä¸ºloggingçš„ä¼˜å…ˆçº§é—®é¢˜,æ‰€ä»¥ä¸èƒ½é‡‡ç”¨beançš„æ–¹å¼æ„é€ ,æˆ‘é‡‡ç”¨çš„æ˜¯java spiæœºåˆ¶å®ç°å¤šç¯å¢ƒåˆ‡æ¢</p>
<h2 id="classloader">ClassLoader</h2>
<ol>
<li>jaråŒ…éš”ç¦»</li>
<li>åŠ¨æ€debug</li>
</ol>
<p>åŠ è½½ç±»å®ä¾‹çš„å‡ ç§æ–¹å¼ ?</p>
<ol>
<li>Class.forName</li>
<li>new</li>
<li>ClassLoader.loadClass</li>
<li>other ä¸€äº›åºåˆ—åŒ–ä»€ä¹ˆçš„</li>
<li>spi =&gt; ServiceLoader</li>
</ol>
<h2 id="classloader-ä¸€äº›ç‚¹">ClassLoader ä¸€äº›ç‚¹</h2>
<ol>
<li>ClassLoader.loadClass ç±»åŠ è½½å™¨å’Œå½“å‰åŠ è½½çš„Classä¸ä¸€è‡´æ—¶ ä¼šå¯¼è‡´</li>
</ol>
<pre><code class="language-java">com.boommanpro.Parent cannot be cast to com.boommanpro.Parent
</code></pre>
<ol>
<li>
<p>new æ–¹å¼ä½¿ç”¨çš„æ˜¯å½“å‰ä»£ç æ‰€åœ¨ç±»åŠ è½½å™¨åŠ è½½ï¼Œè€Œä¸æ˜¯è°ƒç”¨å½“å‰ä»£ç çš„ä»£ç æ‰€åœ¨ç±»åŠ è½½å™¨åŠ è½½</p>
</li>
<li>
<p>Class.forNameè¿ä½œæ—¶ï¼Œé€šè¿‡Reflection.getCallerClass()ï¼Œèƒ½å¤Ÿè·å–æ˜¯è°è°ƒç”¨äº†Class.forNameï¼Œæœ€ç»ˆè¿˜æ˜¯å’Œnew ä¸€è‡´æ€§</p>
</li>
<li>
<p>ä»£ç  Classæœ‰ç±»åŠ è½½å™¨,çº¿ç¨‹æœ‰ç±»åŠ è½½å™¨ ServiceLoaderç”¨çº¿ç¨‹çš„</p>
</li>
</ol>
<h2 id="ä»€ä¹ˆæ—¶å€™ç±»ä¼šè¢«åŠ è½½">ä»€ä¹ˆæ—¶å€™ç±»ä¼šè¢«åŠ è½½</h2>
<p>å‚ç…§ <a href="https://www.cnblogs.com/zhixie/p/11766080.html">javaç±»åœ¨ä½•æ—¶è¢«åŠ è½½</a></p>
<p>è¯´æ˜äº†ä»¥ä¸‹å‡ ç§æ–¹å¼</p>
<ol>
<li>mainç±»</li>
<li>åˆ›å»ºç±»çš„å®ä¾‹ newåˆ›å»ºå­ç±»çš„å®ä¾‹</li>
<li>è®¿é—®ç±»çš„é™æ€æ–¹æ³•</li>
<li>è®¿é—®ç±»çš„é™æ€å˜é‡</li>
<li>åå°„</li>
</ol>
<p>è¡¥å……ä¸¤ç‚¹:</p>
<ol start="6">
<li>cast -&gt;       Object o = new Object(); Parent o2 = (Parent) o; æœ¬è´¨æ˜¯ Parent.class.cast(o);</li>
<li>instanceof   =&gt;  <code>java.lang.Class#isInstance</code></li>
</ol>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åˆ†å¸ƒå¼idæœåŠ¡ tinyIdæºç å­¦ä¹ ]]></title>
        <id>https://boommanpro.cn/post/tinyid/</id>
        <link href="https://boommanpro.cn/post/tinyid/">
        </link>
        <updated>2020-12-28T06:26:59.000Z</updated>
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>æˆ‘ä»¬å¤§è‡´äº†è§£å¸¸è§åˆ†å¸ƒå¼idæœ‰9ç§è§£å†³æ–¹æ¡ˆå¦‚ä¸‹:</p>
<ol>
<li>Redisè‡ªå¢id</li>
<li>UUID</li>
<li>æ•°æ®åº“id</li>
<li>å¤šä¸»æ•°æ®åº“id</li>
<li>åˆ†æ®µid</li>
<li>snowflake</li>
<li>åŸºäºsnowflakeçš„ç™¾åº¦ uid-generator</li>
<li>åŸºäºsnowflakeçš„ç¾å›¢ leaf</li>
<li>æ»´æ»´çš„åˆ†æ®µ tinyId</li>
</ol>
<p>åŸºäºé«˜å¯ç”¨,é«˜æ€§èƒ½,ç®€å•æ˜“ç”¨æ€§,ä½¿ç”¨tinyIdå’Œå­¦ä¹ tinyIdæºç .<br>
<code>å…³äºtinyidï¼Œå¹¶ä¸æ˜¯æ»´æ»´å®˜æ–¹äº§å“ï¼Œåªæ˜¯æ»´æ»´æ‹¥æœ‰çš„ä»£ç ã€‚</code></p>
<p><a href="https://github.com/didi/tinyid/wiki">tinyId-å®˜æ–¹wiki</a></p>
<p><img src="https://boommanpro.cn//post-images/1609137839166.png" alt="" loading="lazy"><br>
ä»£ç è¡Œæ•°ç»Ÿè®¡<br>
<img src="https://boommanpro.cn//post-images/1609137842127.png" alt="" loading="lazy"></p>
<h2 id="ç®€å•ä½¿ç”¨">ç®€å•ä½¿ç”¨</h2>
<pre><code class="language-shell">
## gitåŸç‰ˆ
git clone https://github.com/didi/tinyid.git

## cnpmjs åŠ é€Ÿç‰ˆæœ¬
git clone https://github.com.cnpmjs.org/didi/tinyid.git

</code></pre>
<h2 id="æºç åˆ†æç‚¹">æºç åˆ†æç‚¹</h2>
<ol>
<li>é¡¹ç›®æ¨¡å— <code>tinyid-base</code>  <code>tinyid-client</code> <code>tinyid-server</code> ä¹‹é—´çš„å…³ç³»</li>
</ol>
<pre><code>tinyid-base 
1. SegmentId ä¸­å®šä¹‰äº†å·æ®µæ ¸å¿ƒå®ä½“ï¼Œç”¨äºè·å–nextId()
2. å®šä¹‰å…¬ç”¨çš„ IdGeneratorFactory,IdGenerator,SegmentIdService æ¥å£ï¼Œè®©clientå’Œserverå®ç°å…¶å„è‡ªæ–¹æ³•ã€‚

tinyid-server æ˜¯éƒ¨ç½²åˆ†å¸ƒå¼idæœåŠ¡çš„

tinyid-serveræ˜¯java client,éœ€è¦è‡ªå·±installåˆ°æœ¬åœ°,å®˜æ–¹æ²¡æœ‰å‘å¸ƒåˆ°mavenä»“åº“
</code></pre>
<ol start="2">
<li>client IdGenerator æ˜¯å¦‚ä½•ä¿è¯é«˜æ€§èƒ½,é«˜å¯ç”¨çš„</li>
</ol>
<pre><code>1. é«˜æ€§èƒ½,ä¸è®ºè°ƒç”¨çš„æ˜¯nextIdè¿˜æ˜¯batchæ–¹æ³•,æœ¬è´¨æ˜¯åœ¨æœ¬åœ°ç”Ÿæˆçš„,å¦‚æœè¶…å‡ºäº†æœ¬åœ°ç”Ÿæˆç­–ç•¥ã€‚å»æœåŠ¡å™¨è·å–Segmentæ®µçš„é•¿åº¦. ä¸å¿…æ¯æ¬¡å‘é€httpè¯·æ±‚è·å–ã€‚
2. é«˜å¯ç”¨,å®¢æˆ·ç«¯åœ¨resourceé…ç½® tinyid_client.propertiesæ–‡ä»¶,å…¶å‚æ•° tinyid.server =&gt;
#(tinyid.server=localhost:9999/gateway,ip2:port2/prefix,...)  ç”¨é€—å·åˆ†éš”,è¾¾åˆ°è´Ÿè½½å‡è¡¡çš„æ•ˆæœã€‚
è¯¦æƒ…å¯çœ‹æºç  com.xiaoju.uemc.tinyid.client.factory.impl.IdGeneratorFactoryClient#init
å½“è·å–æ–°çš„segmentæ—¶ä¼šchoose,ç®—æ³•æ˜¯ random

</code></pre>
<ol start="3">
<li>æœåŠ¡å™¨å¦‚ä½•æ­å»ºé›†ç¾¤</li>
</ol>
<pre><code>ä¸ºäº†é˜²æ­¢æœåŠ¡ç«¯æŒ‚æ‰äº§ç”Ÿçš„å•ç‚¹é—®é¢˜ã€‚å¯¼è‡´æœåŠ¡ä¸å¯ç”¨,é‚éœ€è¦æ­å»ºé›†ç¾¤ï¼Œç›´æ¥æ­å»ºå¤šèŠ‚ç‚¹å°±è¡Œã€‚

å…³äºmysqlçš„å¤šä¸»æ•°æ®æºé—®é¢˜=&gt; com.xiaoju.uemc.tinyid.base.entity.SegmentId#init

å¦‚æœä½ æœ‰å¤šä¸ªæ•°æ®æºè¾¾åˆ°æ•°æ®åº“çš„é«˜å¯ç”¨,éœ€è¦é…ç½®æ•°æ®åº“ delta=æ•°æ®åº“ä¸ªæ•°
remainder ä»0æŒ‰é¡ºåºé€’å¢

</code></pre>
<pre><code class="language-java">
    /**
     * è¿™ä¸ªæ–¹æ³•ä¸»è¦ä¸ºäº†1,4,7,10...è¿™ç§åºåˆ—å‡†å¤‡çš„
     * è®¾ç½®å¥½åˆå§‹å€¼ä¹‹åï¼Œä¼šä»¥deltaçš„æ–¹å¼é€’å¢ï¼Œä¿è¯æ— è®ºå¼€å§‹idæ˜¯å¤šå°‘éƒ½èƒ½ç”Ÿæˆæ­£ç¡®çš„åºåˆ—
     * å¦‚å½“å‰æ˜¯å·æ®µæ˜¯(1000,2000]ï¼Œdelta=3, remainder=0ï¼Œåˆ™ç»è¿‡è¿™ä¸ªæ–¹æ³•åï¼ŒcurrentIdä¼šå…ˆé€’å¢åˆ°1002,ä¹‹åæ¯æ¬¡å¢åŠ delta
     * å› ä¸ºcurrentIdä¼šå…ˆé€’å¢ï¼Œæ‰€ä»¥ä¼šæµªè´¹ä¸€ä¸ªidï¼Œæ‰€ä»¥åšäº†ä¸€æ¬¡å‡deltaçš„æ“ä½œï¼Œå®é™…currentIdä¼šä»999å¼€å§‹å¢ï¼Œç¬¬ä¸€ä¸ªidè¿˜æ˜¯1002
     */
    public void init() {
        if (isInit) {
            return;
        }
        synchronized (this) {
            if (isInit) {
                return;
            }
            long id = currentId.get();
            if (id % delta == remainder) {
                isInit = true;
                return;
            }
            for (int i = 0; i &lt;= delta; i++) {
                id = currentId.incrementAndGet();
                if (id % delta == remainder) {
                    // é¿å…æµªè´¹ å‡æ‰ç³»ç»Ÿè‡ªå·±å ç”¨çš„ä¸€ä¸ªid
                    currentId.addAndGet(0 - delta);
                    isInit = true;
                    return;
                }
            }
        }
    }
</code></pre>
<ol start="4">
<li><code>tinyid-server</code>  ä¸­æ˜¯å¦‚ä½•å»ºç«‹å¤šæ•°æ®æºçš„</li>
</ol>
<pre><code>æ ¸å¿ƒæ˜¯ =&gt; org.springframework.jdbc.datasource.lookup.AbstractRoutingDataSource

åœ¨è¯»å–envionmenté…ç½®æ—¶,æ²¡è§è¿‡çš„ä¸€ä¸ªç”¨æ³•æ˜¯ RelaxedPropertyResolver,å¯ä»¥æ ¹æ®å‰ç¼€è·å–ä¿¡æ¯
</code></pre>
<ol start="5">
<li><code>tinyid-server</code>çš„maven profilesé…ç½®å­¦ä¹ </li>
</ol>
<pre><code>    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;online&lt;/id&gt;
            &lt;properties&gt;
                &lt;package.environment&gt;online&lt;/package.environment&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;
        &lt;profile&gt;
            &lt;id&gt;offline&lt;/id&gt;
            &lt;activation&gt;
                &lt;activeByDefault&gt;true&lt;/activeByDefault&gt;
            &lt;/activation&gt;
            &lt;properties&gt;
                &lt;package.environment&gt;offline&lt;/package.environment&gt;
            &lt;/properties&gt;
        &lt;/profile&gt;
    &lt;/profiles&gt;

    
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${spring.version}&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;repackage&lt;/goal&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources/${package.environment}&lt;/directory&gt;
            &lt;/resource&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources/base&lt;/directory&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/build&gt;

</code></pre>
<p>ä¸è¿‡è²Œä¼¼ä¸€èˆ¬ä¸è¿™ä¹ˆç”¨<sub>V</sub></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[åµŒå…¥å¼æ•°æ®åº“ Sqlite]]></title>
        <id>https://boommanpro.cn/post/sqlite/</id>
        <link href="https://boommanpro.cn/post/sqlite/">
        </link>
        <updated>2020-12-21T07:51:58.000Z</updated>
        <content type="html"><![CDATA[<h2 id="åµŒå…¥å¼æ•°æ®åº“">åµŒå…¥å¼æ•°æ®åº“</h2>
<p>æŠ€æœ¯é€‰å‹ Sqliteå’Œh2</p>
<p>h2å»ºè¡¨å®Œå­—æ®µåç§°æ˜¯å¤§å†™,å’ŒåŸæœ¬è®¾è®¡æ€è·¯æœ‰åå·®ï¼Œæ”¾å¼ƒï¼Œé‚é‡‡ç”¨Sqllite</p>
<p>å¹¶ä¸”navicatå¯ä»¥ç¼–è¾‘Sqliteï¼Œè€Œä¸èƒ½ç¼–è¾‘h2</p>
<h2 id="use-in-spring-boot">Use in Spring Boot</h2>
<p>æ•´åˆSpring data jpa  jdbcTemplate</p>
<pre><code>
        &lt;dependency&gt;
            &lt;groupId&gt;org.xerial&lt;/groupId&gt;
            &lt;artifactId&gt;sqlite-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.zsoltfabok&lt;/groupId&gt;
            &lt;artifactId&gt;sqlite-dialect&lt;/artifactId&gt;
            &lt;version&gt;1.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
</code></pre>
<pre><code class="language-properties">spring.datasource.url=jdbc:sqlite::resource:db/sqlite/db_freyr_test.db
spring.datasource.username=
spring.datasource.password=
spring.datasource.driver-class-name=org.sqlite.JDBC
spring.datasource.platform=org.hibernate.dialect.SQLiteDialect
</code></pre>
<p>åˆ°æ­¤ jpaå’ŒjdbcTemplate æ•´åˆå®Œæ¯•</p>
<h2 id="é‡åˆ°é—®é¢˜æ€»ç»“">é‡åˆ°é—®é¢˜æ€»ç»“</h2>
<pre><code>Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.data.relational.core.dialect.Dialect]: Factory method 'jdbcDialect' threw exception; nested exception is org.springframework.data.jdbc.repository.config.DialectResolver$NoDialectException: Cannot determine a dialect for org.springframework.jdbc.core.JdbcTemplate@51eb0e84. Please provide a Dialect.
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:650)
	... 34 common frames omitted
Caused by: org.springframework.data.jdbc.repository.config.DialectResolver$NoDialectException: Cannot determine a dialect for org.springframework.jdbc.core.JdbcTemplate@51eb0e84. Please provide a Dialect.
	at org.springframework.data.jdbc.repository.config.DialectResolver.lambda$getDialect$2(DialectResolver.java:80)
	at java.util.Optional.orElseThrow(Optional.java:290)
	at org.springframework.data.jdbc.repository.config.DialectResolver.getDialect(DialectResolver.java:79)
	at org.springframework.data.jdbc.repository.config.AbstractJdbcConfiguration.jdbcDialect(AbstractJdbcConfiguration.java:144)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154)
	... 35 common frames omitted

</code></pre>
<p><a href="https://github.com/taosdata/TDengine/issues/3678">2.3.4.RELEASE ç‰ˆæœ¬ä¼šæœ‰é—®é¢˜</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[SpringElUtil å·¥å…·ç±»]]></title>
        <id>https://boommanpro.cn/post/springelutil-code/</id>
        <link href="https://boommanpro.cn/post/springelutil-code/">
        </link>
        <updated>2020-12-17T11:05:16.000Z</updated>
        <content type="html"><![CDATA[<h1 id="springelutil-å·¥å…·ç±»">SpringElUtil å·¥å…·ç±»</h1>
<p>åœ¨é¡¹ç›®ä¸­é¢‘ç¹ä½¿ç”¨SpringELè¡¨è¾¾å¼è¿›è¡Œæ•°æ®è§£æ,è¿‡æ»¤ç­‰æ“ä½œ. é‚æŠ½å–å·¥å…·ç±»ä½¿ç”¨</p>
<h2 id="show-me-code">Show me code</h2>
<pre><code class="language-java">
import java.util.concurrent.ConcurrentHashMap;

import org.springframework.beans.BeansException;
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.context.ApplicationContextException;
import org.springframework.context.ConfigurableApplicationContext;
import org.springframework.context.expression.*;
import org.springframework.expression.Expression;
import org.springframework.expression.ExpressionParser;
import org.springframework.expression.spel.standard.SpelExpressionParser;
import org.springframework.expression.spel.support.StandardEvaluationContext;
import org.springframework.expression.spel.support.StandardTypeLocator;
import org.springframework.stereotype.Component;

/**
 * @author boommanpro
 * @date 2020/12/17 17:51
 */
@Component
public class SpringElUtil implements ApplicationContextAware {

    private static StandardEvaluationContext context;

    private static ExpressionParser expressionParser;

    private static final ConcurrentHashMap&lt;String, Expression&gt; EXPRESSION_MAP = new ConcurrentHashMap&lt;&gt;();

    public static &lt;T&gt; T getValue(String expressionString) {
        return getValue(expressionString, null);
    }

    @SuppressWarnings(&quot;all&quot;)
    public static &lt;T&gt; T getValue(String expressionString, Object rootObject) {
        Expression expression = getExpression(expressionString);
        return ((T) expression.getValue(context, rootObject));
    }


    private static Expression getExpression(String expressionString) {
        return EXPRESSION_MAP.computeIfAbsent(expressionString, s -&gt; expressionParser.parseExpression(s));
    }


    @Override
    @SuppressWarnings(&quot;all&quot;)
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        if (applicationContext instanceof ConfigurableApplicationContext) {
            ConfigurableApplicationContext ac = (ConfigurableApplicationContext) applicationContext;
            context = new StandardEvaluationContext();
            context.addPropertyAccessor(new BeanExpressionContextAccessor());
            context.addPropertyAccessor(new BeanFactoryAccessor());
            context.addPropertyAccessor(new MapAccessor());
            context.addPropertyAccessor(new EnvironmentAccessor());
            context.setBeanResolver(new BeanFactoryResolver(ac.getBeanFactory()));
            context.setTypeLocator(new StandardTypeLocator(ac.getBeanFactory().getBeanClassLoader()));
            //åˆå§‹åŒ–ä¸Šä¸‹æ–‡
            expressionParser = new SpelExpressionParser();
        } else {
            throw new ApplicationContextException(&quot;can't cast ConfigurableApplicationContext&quot;);
        }
    }
}

</code></pre>
<h2 id="example">Example</h2>
<pre><code>#result = 1 + 2
#{6.0221415E+23D instanceof T(Double)}
intArray[idx]-- le 0xFF
{1, 2, 3}
(true and false) || variable not null ? 1.0f : 0.0f
Members.?[Nationality == 'Serbian']
'5.00' matches '\^-?\\d+(\\.\\d{2})?$'
new java.lang.String('stringLiteral')
${myPropertyKey}
@myBean.instanceMethod(1, 2)
T(String).CASE_INSENSITIVE_ORDER
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[VSCode - Alibaba Cloud Toolkit]]></title>
        <id>https://boommanpro.cn/post/vscode-alibaba-cloud-toolkit/</id>
        <link href="https://boommanpro.cn/post/vscode-alibaba-cloud-toolkit/">
        </link>
        <updated>2020-12-09T11:04:00.000Z</updated>
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>å‰ç«¯åœ¨å†…ç½‘å¼€å‘éƒ¨ç½²æµ‹è¯•ç¯å¢ƒå¾ˆæ…¢,æˆ–è€…è¯´å¾ˆç¹çã€‚ä¹‹å‰åœ¨äº’è”ç½‘ç¯å¢ƒ,æˆ‘ä»¬éƒ½æ˜¯ä½¿ç”¨Jenkinsåšæ‰“åŒ…éƒ¨ç½²å·¥ä½œçš„ã€‚è¿™ä¸€æ¬¡ä»‹ç» <code>Alibaba Cloud Toolkit</code> ç®€åŒ–éƒ¨ç½²æµç¨‹ï¼Œæˆ–è€…ä¸€é”®éƒ¨ç½²é¡¹ç›®ã€‚</p>
<h2 id="æ’ä»¶åœ°å€">æ’ä»¶åœ°å€</h2>
<p><a href="https://marketplace.visualstudio.com/items?itemName=alibabacloud-cloudtoolkit.toolkit-vscode">Alibaba Cloud Toolkit</a></p>
<h2 id="ä¸‹è½½å®‰è£…extension">ä¸‹è½½å®‰è£…Extension</h2>
<p>äº’è”ç½‘ç›´æ¥åœ¨vscodeå·¦ä¾§æœç´¢ä¸‹è½½å°±è¡Œã€‚ä¸‹å›¾ä¸ºåœ¨çº¿ä¸‹è½½</p>
<ol>
<li>
<p>ä¸‹è½½è¿‡ç¨‹<br>
<img src="https://boommanpro.cn//post-images/1607512179792.png" alt="" loading="lazy"></p>
</li>
<li>
<p>å®‰è£…</p>
</li>
</ol>
<figure data-type="image" tabindex="1"><img src="https://boommanpro.cn//post-images/1607512218202.png" alt="" loading="lazy"></figure>
<h2 id="ä½¿ç”¨æ•™ç¨‹-éƒ¨ç½²åˆ°ç§æœ‰æœåŠ¡å™¨ä¸Š">ä½¿ç”¨æ•™ç¨‹ éƒ¨ç½²åˆ°ç§æœ‰æœåŠ¡å™¨ä¸Š</h2>
<figure data-type="image" tabindex="2"><img src="https://boommanpro.cn//post-images/1607512315392.png" alt="" loading="lazy"></figure>
<figure data-type="image" tabindex="3"><img src="https://boommanpro.cn//post-images/1607512518138.png" alt="" loading="lazy"></figure>
<h2 id="å†™åœ¨æœ€å">å†™åœ¨æœ€å</h2>
<p>VSCode - Alibaba Cloud Toolkit å’Œ IDEA çš„plugins å¤§åŒå°å¼‚ï¼Œä½¿ç”¨èµ·æ¥éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦‚æœä¸Šè¿°ä¸æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œå¯ä»¥å¯¹buildçš„å‰ååšaop,å¢åŠ ç›¸å…³è„šæœ¬ï¼Œå¦‚å¤‡ä»½ç­‰ç­‰ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[é«˜å¹¶å‘æ•°æ®çˆ¬å–å®æˆ˜]]></title>
        <id>https://boommanpro.cn/post/concurrent-crawler/</id>
        <link href="https://boommanpro.cn/post/concurrent-crawler/">
        </link>
        <updated>2020-12-01T07:39:39.000Z</updated>
        <content type="html"><![CDATA[<h2 id="èƒŒæ™¯">èƒŒæ™¯</h2>
<p>æœ‰ä¸€ä¸ª1300wçš„<code>record.csv</code>æ–‡ä»¶,å…¶å†…å®¹ç¤ºä¾‹å¦‚ä¸‹ï¼Œæ–‡ä»¶å¤§å°2Gã€‚csvæ–‡ä»¶ç”¨é€—å·åˆ†éš”,ç¬¬ä¸€éƒ¨åˆ†æ˜¯å”¯ä¸€id,ç¬¬äºŒéƒ¨åˆ†æ˜¯çˆ¬å–åœ°å€ã€‚</p>
<pre><code class="language-csv">recordid,entranceimage
adfa-20932-ada-daf1a,http://xxxxx
adfa-20932-ada-dafa2,http://xxxxx
</code></pre>
<p>éœ€æ±‚:</p>
<ol>
<li>å•æœºçˆ¬å–æ–‡ä»¶ï¼Œå…·æœ‰å®¹ç¾æœºåˆ¶</li>
<li>æ€§èƒ½è¦é«˜ï¼Œå…·æœ‰ç¨³å®šæ€§</li>
<li>éƒ¨ç½²ä½¿ç”¨èµ·æ¥è¦ç®€å•ï¼Œé‚ä¸ä¾èµ–mysql,mongodbç­‰è®°å½•ï¼Œçº¯æ–‡ä»¶</li>
</ol>
<h2 id="éœ€æ±‚åˆ†è§£">éœ€æ±‚åˆ†è§£</h2>
<ol>
<li>è¦æœ‰å®¹ç¾æœºåˆ¶ï¼Œé‚ä½¿ç”¨status.txtè®°å½•ä¸Šä¸€æ¬¡æ‰§è¡Œåˆ°record.csvæ–‡ä»¶å¤šå°‘è¡Œã€‚æ–¹ä¾¿æœåŠ¡é‡å¯åèƒ½ç»§ç»­ä¸Šä¸€æ¬¡çš„è®°å½•è·‘ã€‚</li>
<li>è¦å…·æœ‰ç¨³å®šæ€§ï¼Œä¸èƒ½è·‘ä¸èµ·æ¥å§ã€‚å•æ–‡ä»¶2Gä¸èƒ½ä¸€æ¬¡åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œé‚é‡‡ç”¨nioæŒ‰è¡Œ(readLine)è¯»å– <code>record.csv</code>æ–‡ä»¶</li>
<li>æ€§èƒ½è¦é«˜ =&gt; é‡‡ç”¨å¤šçº¿ç¨‹å·¥ä½œã€‚åˆå› ä¸ºå®¹ç¾éœ€è¦ä»ä¸Šä¸€æ¬¡è·‘ï¼Œé‚ä¸èƒ½ä¸¢å¤±ã€‚é‡‡ç”¨ç”Ÿäº§è€…å°†Taskæ”¾åˆ°çº¿ç¨‹æ± é‡Œï¼Œæ¶ˆè´¹è€… <code>LinkedBlockingQueue&lt;Future&lt;T&gt;&gt;</code>ç”¨é˜Ÿåˆ—æœ‰åºæ¶ˆè´¹ã€‚è®°å½•æ—¥å¿—å’Œstatus.txtæ–‡ä»¶è¡Œã€‚</li>
<li>ç¨³å®šæ€§é«˜ï¼Œå‡å°‘é¡¹ç›®GCæ¬¡æ•°ï¼Œå¯¹äºé¢‘ç¹åˆ›å»ºå¯¹è±¡ï¼Œæƒ…å†µå…è®¸åˆ›å»ºå¯¹è±¡æ± ã€‚</li>
<li>çˆ¬å–æ•°æ®çš„ç»“æœæ˜¯å›¾ç‰‡ï¼Œç›´æ¥å­˜å‚¨åˆ°æœ¬åœ°æ–‡ä»¶ï¼Œé‚é‡‡ç”¨<code>é›¶æ‹·è´</code></li>
</ol>
<pre><code class="language-java">     InputStream is2 = httpUrlConn.getInputStream();
     Path target = Paths.get(&quot;&quot;,imageData.getPath());
     Files.createDirectories(target.getParent());
     Files.copy(is2, target, StandardCopyOption.REPLACE_EXISTING);
</code></pre>
<h2 id="ç›¸å…³èµ„æ–™æ€»ç»“">ç›¸å…³èµ„æ–™æ€»ç»“</h2>
<p>ä¼˜åŒ–æ–¹æ¡ˆ</p>
<ol>
<li>Files å»readLine <code>BufferedReader reader = Files.newBufferedReader(Paths.get(DATA_FILE_NAME), StandardCharsets.UTF_8);</code></li>
<li>status.txtåªè®°å½•æ€»è¡Œæ•° log.txtè®°å½•æ—¥å¿— åˆ†å¼€è®°å½•</li>
<li>å¯¹è±¡æ±  åœ¨ä»£ç ä¸­å‡å°‘å¯¹è±¡çš„åˆ›å»º å‡å°‘jvm gc</li>
<li>åŸºäºzero-copyè¿›è¡Œæ‹·è´æ–‡ä»¶<a href="https://blog.csdn.net/weixin_43513980/article/details/105835427">zero-copy</a></li>
<li>å•ç”Ÿäº§è€… æ¶ˆè´¹è€… æ¯’ä¸¸é—®é¢˜ <a href="https://blog.csdn.net/hnhygkx/article/details/105144615">æ¶ˆè´¹è€…åœæ­¢é—®é¢˜</a></li>
<li>HttpURLConnection è¿æ¥å¤ç”¨é—®é¢˜ =&gt;<a href="https://blog.csdn.net/u012216753/article/details/78084327">KeepAlive</a></li>
</ol>
]]></content>
    </entry>
</feed>